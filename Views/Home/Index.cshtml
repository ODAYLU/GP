@{ ViewData["Title"] = "أملاك الصفحة الرئيسية"; }
@{
    var types = new SelectList(@ViewBag.Types,"Id","type");
    var categories = new SelectList(@ViewBag.Categories,"Id","category");
    var cities = new SelectList(@ViewBag.Cities,"Id","name"); 
    var states = new SelectList(@ViewBag.States,"Id","name");
    var likes = (List<long>)ViewBag.Likes;
}

@{


   
}

  <style>
    header{
      position: absolute;z-index: 100000;
    }
    nav {
  background-color: rgba(17, 17, 17, 0);
} 
    body:before {
      content: "";
      position: fixed;
      top: 0;
      left: 0;
      height: 100%;
      width: 100%;
      background-color: #2a5555;
      opacity: 0.7;
      z-index: 1;
    }
  </style>
  <video class="bg-video" playsinline="playsinline" autoplay="autoplay" muted="muted" loop="loop">
    <source src="~/indexLayout/assets/img/pages/bg.mp4" type="video/mp4" />
  </video>
   <form  asp-controller="Home" asp-action="FilterEstate">
  <div class="container-fluid d-none d-lg-block pt-5" style="position: absolute;z-index: 5; top: 11rem;">
    <div class="row justify-content-center align-items-center text-center ">
      <p class="fs-1 text-white animated wow fadeInDown">ابحث عن العقار الأنسب لك </p>
      <p class="fs-4 text-white pb-5 animated wow fadeInDown">لديك الفرصة لوضع عقارك</p>
      
      <div class="bgacground rounded-5 w-50  p-3 py-4 animated wow fadeInUp">
        <div class="row justify-content-between align-items-center ">
            
            <div class="col-lg-2 col-md-6 col-12 d-flex flex-column ">
                <h5>النوع</h5>
                <select name="Type" class="form-selectt" asp-items="@types" aria-label="Default select example">
                  <option>ِِاختر نوع</option>
                </select>
              </div>
              <div class="col-lg-2 col-md-6 col-12 d-flex flex-column ">
                <h5>التصنيف </h5>
                <select name="Category" class="form-selectt" asp-items="categories" aria-label="Default select example">
                  <option >اختر تصنيف العقار</option>
                </select>
              </div>
              <div class="col-lg-2 col-md-6 col-12 d-flex flex-column ">
                <h5>الدولة</h5>
                <select name="State" class="form-selectt" asp-items="@states" aria-label="Default select example">
                     <option >اختر الدولة</option>
                </select>
              </div>
              <div class="col-lg-2 col-md-6 col-12 d-flex flex-column ">
                <h5>المدينة</h5>
                <select name="City" class="form-selectt" asp-items="@cities"  aria-label="Default select example">
                     <option >اختر  المدينة</option>
                    
                </select>
              </div>
              <div class="col-lg-2 col-12">
                <button type="submit" class="btn btn-search px-3 py-2 rounded-5"><i class="bi bi-search"></i></button>
              </div>
              
        </div>
      </div>
        
    </div>
  </div>
  </form>
  <div class="masthead">
    <div class="masthead-content">
      <div class="container-fluid d-block d-lg-none pt-5">
        <div class="row justify-content-center align-items-center text-center ">
          <p class="fs-1 text-white animated wow fadeInDown">ابحث عن العقار الأنسب لك </p>
          <p class="fs-4 text-white animated wow fadeInDown">لديك الفرصة لوضع عقارك</p>
          <div class="bgacground rounded-5  p-3 py-4 animated wow fadeInUp">
            <div class="row justify-content-between align-items-center ">
                <form asp-controller="Home" asp-action="FilterEstate">
            <div class="col-lg-2 col-md-6 col-12 d-flex flex-column ">
                <h5>النوع</h5>
                <select name="Type" class="form-selectt" asp-items="@types" aria-label="Default select example">
                  <option>ِِاختر نوع</option>
                </select>
              </div>
              <div class="col-lg-2 col-md-6 col-12 d-flex flex-column ">
                <h5>التصنيف </h5>
                <select name="Category" class="form-selectt" asp-items="categories" aria-label="Default select example">
                  <option >اختر تصنيف العقار</option>
                </select>
              </div>
              <div class="col-lg-2 col-md-6 col-12 d-flex flex-column ">
                <h5>الدولة</h5>
                <select name="State" class="form-selectt" aria-label="Default select example">
                  <option selected>ِِشقة</option>
                  <option value="1">One</option>
                  <option value="2">Two</option>
                  <option value="3">Three</option>
                </select>
              </div>
              <div class="col-lg-2 col-md-6 col-12 d-flex flex-column ">
                <h5>المدينة</h5>
                <select name="City" class="form-selectt"  aria-label="Default select example">
                  <option selected>ِِشقة</option>
                  <option value="1">One</option>
                  <option value="2">Two</option>
                  <option value="3">Three</option>
                </select>
              </div>
              <div class="col-lg-2 col-12">
                <button  class="btn btn-search px-3 py-2 rounded-5"><i class="bi bi-search"></i></button>
              </div>
                </form>
             
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="social-icons ">
    <div class="d-flex flex-row flex-lg-column justify-content-center align-items-center h-100 mt-3 mt-lg-0">
      <a class="btn btn-dark text-white m-3 " data-aos="fade-down-right" data-aos-delay="100"
        data-aos-easing="ease-in-sine" href="#!"><i class="bi bi-twitter"></i></a>
      <a class="btn btn-dark text-white m-3 " data-aos="fade-down-right" data-aos-delay="250"
        data-aos-easing="ease-in-sine" href="#!"><i class="bi bi-facebook"></i></a>
      <a  class="btn btn-dark text-white m-3 " data-aos="fade-down-right" data-aos-delay="350"
        data-aos-easing="ease-in-sine" href="#!"><i class="bi bi-instagram"></i></a>
    </div>
  </div>


  <div class="position-absolute w-100 bgdaeke" style="z-index: 5;">

    <main class="">
 @*العقارات المميزة*@
      <section class="mb-5 ">
        <div class="container py-3">
          <p class="text-center fs-2 py-5" data-aos="fade-down"><span class="txtborder">العقارات المميزة</span></p>
          <div class="row pt-3 g-3">
          
           @{

                                                               @if(@ViewBag.FavEstate is not null)
                  foreach (var item in (List<Estate>)ViewBag.FavEstate)
                  {
                
                                                <div class="col-12 col-md-6 col-lg-3 " data-aos="zoom-in-left">
                                                            <div class="game px-2">
                                                            <div class="rank"><span class="bi bi-star-fill checked"></span></div>
                                                            <div class="front">
                                                              <img src="~/indexLayout/assets/img/pages/home1.jpg" class="img-fluid" alt="game">
                                                              <div>
                                                                <h3 class="text-center py-3">@item.name</h3>
                                                              </div>
                                                              <div class="status d-flex justify-content-between align-items-center">
                                                                <span>@item.Likes</span>
                                                                <span class="bi bi-star-fill checked"></span>
                                                              </div>
                                                            </div>
                                                            <div class="back">
                                                              <div class="streaming-info">
                                                                <div class="game-stat  text-center">
                                                                  <b>  السعر: @item.price @item.Currency.currency </b> <br/> <b> المدينة @item.City.name </b><br/> <b>الدولة @item.State.name  </b>
                                                                  
                                                                </div>
                                                              </div>
                                                              <div class="d-flex align-items-center">
                                                                <a href="#" class="rounded-5 p-2 bg-b mx-3">انقر التفاصيل </a>
                                                                                @if (likes.Contains(item.Id))
                                                {
                                                                                    <a onclick="AddLike(@item.Id,this)"><i  class="heart-des bi bi-heart-fill mx-3"></i></a>
                                                }
                                                else
                                                {
                                                                                    <a onclick="AddLike(@item.Id,this)"><span>@item.Likes</span><i  class="heart bi bi-heart-fill mx-3"></i></a>
                                                }
                                                                            </div>
                                                            </div>
                                                            <div class="backgroundWrapper"></div>
                                                          </div>
                                                        </div>

                  }
              }
            
            
          </div>
        </div>
      </section>

    @*  أحدث العقارات*@
  
      <section class="mb-5  container-fluid container-md">
        <p class="text-center fs-2 " data-aos="fade-down"><span class="txtborder">أحدث العقارات</span></p>
        <p class="text-secondary  text-center fs-4 mb-5" data-aos="fade-down">أملاك يقدم لك أحدث العقارات للعثور على
          العقار الذي تحلم به بسهولة </p>
        <div class="swiper mySwiper" data-aos="zoom-in-down">
          <div class="swiper-wrapper">
     @{

                                                               @if(@ViewBag.FavEstate is not null)
                  foreach (var item in (List<Estate>)ViewBag.FavEstate)
                  {
                
                                                <div class="col-12 col-md-6 col-lg-3 " data-aos="zoom-in-left">
                                                            <div class="game px-2">
                                                            <div class="rank"><span class="bi bi-star-fill checked"></span></div>
                                                            <div class="front">
                                                              <img src="~/indexLayout/assets/img/pages/home1.jpg" class="img-fluid" alt="game">
                                                              <div>
                                                                <h3 class="text-center py-3">@item.name</h3>
                                                              </div>
                                                              <div class="status d-flex justify-content-between align-items-center">
                                                                <span>@item.Likes</span>
                                                                <span class="bi bi-star-fill checked"></span>
                                                              </div>
                                                            </div>
                                                            <div class="back">
                                                              <div class="streaming-info">
                                                                <div class="game-stat  text-center">
                                                                  <b>  السعر: @item.price @item.Currency.currency </b> <br/> <b> المدينة @item.City.name </b><br/> <b>الدولة @item.State.name  </b>
                                                                  
                                                                </div>
                                                              </div>
                                                              <div class="d-flex align-items-center">
                                                                <a href="#" class="rounded-5 p-2 bg-b mx-3">انقر التفاصيل </a>
                                                                                @if (likes.Contains(item.Id))
                                                {
                                                                                    <a onclick="AddLike(@item.Id,this)"><i  class="heart-des bi bi-heart-fill mx-3"></i></a>
                                                }
                                                else
                                                {
                                                                                    <a onclick="AddLike(@item.Id,this)"><span>@item.Likes</span><i  class="heart bi bi-heart-fill mx-3"></i></a>
                                                }
                                                                            </div>
                                                            </div>
                                                            <div class="backgroundWrapper"></div>
                                                          </div>
                                                        </div>

                  }
              }
          </div>
          <div class="swiper-pagination p-2"></div>
          <div class="swiper-button-next"></div>
          <div class="swiper-button-prev"></div>
        </div>
      </section>

      <section class="pb-5 ">
        <div class="elementor-shape elementor-shape-top" data-negative="false">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 100" preserveAspectRatio="none">
            <path class="elementor-shape-fill" opacity="0.33"
              d="M473,67.3c-203.9,88.3-263.1-34-320.3,0C66,119.1,0,59.7,0,59.7V0h1000v59.7 c0,0-62.1,26.1-94.9,29.3c-32.8,3.3-62.8-12.3-75.8-22.1C806,49.6,745.3,8.7,694.9,4.7S492.4,59,473,67.3z">
            </path>
            <path class="elementor-shape-fill" opacity="0.66"
              d="M734,67.3c-45.5,0-77.2-23.2-129.1-39.1c-28.6-8.7-150.3-10.1-254,39.1 s-91.7-34.4-149.2,0C115.7,118.3,0,39.8,0,39.8V0h1000v36.5c0,0-28.2-18.5-92.1-18.5C810.2,18.1,775.7,67.3,734,67.3z">
            </path>
            <path class="elementor-shape-fill"
              d="M766.1,28.9c-200-57.5-266,65.5-395.1,19.5C242,1.8,242,5.4,184.8,20.6C128,35.8,132.3,44.9,89.9,52.5C28.6,63.7,0,0,0,0 h1000c0,0-9.9,40.9-83.6,48.1S829.6,47,766.1,28.9z">
            </path>
          </svg>
        </div>

        <div class="container">
          <div class="row p-5 justify-content-center align-items-center text-center">
            <div class="col-12 col-lg-6" data-aos="fade-left" data-aos-easing="linear" data-aos-duration="1500">
              <p class="fs-2">نحن نقدم الاختيار الصحيح للعقارات التي تحتاجها</p>
              <p class="fs-4">
                يتوفر هنا عدد ضخم من العقارات للبيع والشراء والإيجار. تجد هنا أيضًا عقارًا للعيش المشترك ، لذا عليك أن
                تختار هنا وتستمتع بخصم كبير.
              </p>
            </div>
            <div class="col-12 col-lg-6" data-aos="fade-right" data-aos-easing="linear" data-aos-duration="1500">
              <img src="~/indexLayout/assets/img/pages/about.png" class="img-fluid">
            </div>
          </div>
        </div>
      </section>
      <section class="pb-3 ">
        <div class="container bg-secondary border-2 rounded-5 text-center p-5  text-white ">
          اعلان
        </div>
      </section>

      <section>
        <p class="text-center fs-2 " data-aos="fade-down"><span class="txtborder">التصنيفات</span></p>
        <div class="container-fluid">
          <div class="row">
            <div class="col-6">
                 <h1 class="text-center p-5">عقارات شقق</h1>
              <div class="row g-2">
                  
               @if(@ViewBag.ModernEstateApartment is not null)
                  foreach (var item in (List<Estate>)ViewBag.ModernEstateApartment)
                  {  
                 <div class="col-12 col-md-6 col-lg-3 p-2" data-aos="zoom-in-left">
                <div class="game px-2">
                <div class="rank"><span class="bi bi-star-fill checked"></span></div>
                <div class="front">
                  <img src="@item.Main_photo" class="img-fluid" alt="game">
                  <div>
                    <h3 class="text-center py-3">@item.name</h3>
                  </div>
                  <div class="status d-flex justify-content-between align-items-center">
                    <span>@item.Likes</span>
                    <span class="bi bi-star-fill checked"></span>
                  </div>
                </div>
                <div class="back">
                  <div class="streaming-info">
                    <div class="game-stat  text-center">
                      <b>  السعر: @item.price @item.Currency.currency </b> <br/> <b> المدينة @item.City.name </b><br/> <b>الدولة @item.State.name  </b>
                      
                    </div>
                  </div>
                  <div class="d-flex align-items-center">
                  <a asp-action="Detalis" asp-controller="Estate" asp-route-id="@item.Id" class="rounded-5 p-2 bg-b mx-3">انقر التفاصيل </a>
                   @if (likes.Contains(item.Id))
                    {
                            <a onclick="AddLike(@item.Id,this)"><span>@item.Likes</span><i  class="heart-des bi bi-heart-fill mx-3"></i></a>
                    }
                    else
                    {
                            <a onclick="AddLike(@item.Id,this)"><span>@item.Likes</span><i  class="heart bi bi-heart-fill mx-3"></i></a>
                    }
                  </div>
                </div>
                <div class="backgroundWrapper"></div>
              </div>
            </div>
               
                
    

                  }
              </div>
            </div>
            <div class="col-6" >
                  <h1 class="text-center p-5">عقارات منازل</h1>
              <div class="row g-2">
                   @if(@ViewBag.ModernEstateHouse is not null)
                  foreach (var item in (List<Estate>)ViewBag.ModernEstateHouse)
                  {
                 <div class="col-12 col-md-6 p-2" data-aos="zoom-in-left">
                <div class="game px-2">
                <div class="rank"><span class="bi bi-star-fill checked"></span></div>
                <div class="front">
                  <img src="@item.Main_photo" class="img-fluid" alt="game">
                  <div>
                    <h3 class="text-center py-3">@item.name</h3>
                  </div>
                  <div class="status d-flex justify-content-between align-items-center">
                    <span>@item.Likes</span>
                    <span class="bi bi-star-fill checked"></span>
                  </div>
                </div>
                <div class="back">
                  <div class="streaming-info">
                    <div class="game-stat  text-center">
                      <b>  السعر: @item.price @item.Currency.currency </b> <br/> <b> المدينة @item.City.name </b><br/> <b>الدولة @item.State.name  </b>
                      
                    </div>
                  </div>
                  <div class="d-flex align-items-center">
                   <a asp-action="Detalis" asp-controller="Estate" asp-route-id="@item.Id" class="rounded-5 p-2 bg-b mx-3">انقر التفاصيل </a>
                   @if (likes.Contains(item.Id))
                    {
                            <a onclick="AddLike(@item.Id,this)"><span>@item.Likes</span><i  class="heart-des bi bi-heart-fill mx-3"></i></a>
                    }
                    else
                    {
                            <a onclick="AddLike(@item.Id,this)"><span>@item.Likes</span><i  class="heart bi bi-heart-fill mx-3"></i></a>
                    }
                  </div>
                </div>
                <div class="backgroundWrapper"></div>
              </div>
            </div>
                  
                
    

                  }
                
              </div>
            </div>
          </div>
        </div>

       
      </section>
</main>
</div>
@section Scripts{
    <script type="text/javascript">
function AddLike(Id,el) {
   
      $.ajax({
            method: 'Get',
            url: `/Estate/AddLikes/${Id}`,

            success: function (data) {
            $(el).children("span").text(data.count);
                if (data.status == "like") {
                    $(el).children("i").addClass("heart-des");
                } else {
                     $(el).children("i").addClass("heart");
                }
               
            }
 });
}   
 $(function () {
                $("#mm").chosen();  
                
          })
          window.onload=function (){
              var x = document.getElementById("mm_chosen");
              x.classList.add("w-100");
          }
        
    </script>
    
}
