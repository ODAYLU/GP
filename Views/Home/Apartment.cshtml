<style>
    header{
      position: absolute;z-index: 100000;
    }
    nav {
  background-color: rgba(17, 17, 17, 0);
} 

  </style> 
 <video class="bg-video" playsinline="playsinline" autoplay="autoplay" muted="muted" loop="loop">
    <source src="~/indexLayout/assets/img/pages/bg.mp4" type="video/mp4" />
  </video>
<div class="container-fluid d-none d-lg-block pt-5 mb-5" >

    <div class="row justify-content-center align-items-center text-center ">

      <p class="fs-1 text-white animated wow fadeInDown">ابحث عن العقار الأنسب لك </p>
      <p class="fs-4 text-white pb-5 animated wow fadeInDown">لديك الفرصة لوضع عقارك</p>
      
      <div class="bgacground rounded-5 w-50  p-3 py-4 animated wow fadeInUp">
        <div class="row justify-content-between align-items-center ">
            
                <h1>
                    عقارات
                  -  @ViewBag.CategoryName
                </h1>
              
        </div>
      </div>
        
    </div>
  </div>
  
    <div class="position-absolute w-100 bgdaeke" style="z-index: 5;">
        <main class="">
  <section class="mb-5 ">
        <div class="container py-3">
          <p class="text-center fs-2 py-5" data-aos="fade-down"><span class="txtborder"> عقارات أملاك @ViewBag.CategoryName </span></p>
          <div id="Estates" class="row pt-3 g-3">
       
          </div>
<nav aria-label="...">
  <ul  id="pagination" class="pagination ">
  
  </ul>
</nav>
        </div>
      </section>
      </main>
      
      </div>
     
      @section Scripts{
    <script type="text/javascript">
$(document).ready(function() {
    $.ajax({
            method: 'Get',
            url: `/api/ApiEstate/GetApartments`,
            success: function (estate) {
                var pages = "";
                pages += `  <li id="btnPrevious" class="page-item disabled" ><span class="page-link ">Previous</span></li>`;
                if (estate.pages >= 3) {
                    for (var x = 1; x < 4; x++) {
                        pages += ` <li  class="page-item"><a class="page-link" onClick="GetDataPage(${x},this)">${x}</a></li>`;
                    }

                     pages += ` <li  class="page-item"><a class="page-link" onClick="GetDataPage(${estate.pages},this)">${estate.pages}</a></li>`
                } else {
                     for (var x = 1; x < estate.pages+1; x++) {
                        pages += ` <li  class="page-item last"><a class="page-link" onClick="GetDataPage(${x},this)">${x}</a></li>`;
                    }
                }
                pages += ` <li id="btnNext" class="page-item"><span class="page-link">Next</span>`;
                $("#pagination").html(pages);

                var text = "";
                for (var i = 0; i < estate.data.length; i++) {
                    text += `<div class="col-12 col-md-6 col-lg-3 " data-aos="zoom-in-left">
                <div class="game px-2">
                <div class="rank"><span class="bi bi-star checked"></span></div>
                <div class="front">
                  <img src="${estate.data[i].main_photo}" class="img-fluid" alt="game">
                  <div>
                    <h3 class="text-center py-3">${estate.data[i].name}</h3>
                  </div>
                  <div class="status d-flex justify-content-between align-items-center">
                    <span>${estate.data[i].likes}</span>
                    <span class="bi bi-star checked"></span>
                  </div>
                </div>
                <div class="back">
                  <div class="streaming-info">
                    <div class="game-stat  text-center">
                      <b>  السعر:  ${estate.data[i].price} ${estate.data[i].currency.currency} </b> <br/> <b> ${estate.data[i].city.name} المدينة  </b><br/> <b>الدولة${estate.data[i].state.name}  </b>
                      
                    </div>
                  </div>
                  <div class="d-flex align-items-center">
                    <a href="#" class="rounded-5 p-2 bg-b mx-3">انقر التفاصيل </a>
                    <i class="heart bi bi-heart-fill mx-3"></i>
                  </div>
                </div>
                <div class="backgroundWrapper"></div>
              </div>
            </div>`;
                }
                $("#Estates").html(text);
            }
 });
});
function GetDataPage(x) {
     $.ajax({
            method: 'Get',
            url: `/api/ApiEstate/GetApartments`,
         data: {pageNumber:x},
            success: function (estate) {
                var pages = "";
                pages += `  <li id="btnPrevious" class="page-item disabled" ><span   class="page-link ">Previous</span></li>`;
                if (estate.pages >= 3) {
                    for (var x = 1; x < 4; x++) {
                        pages += ` <li  class="page-item"><a class="page-link" onclick="GetDataPage(${x})">${x}</a></li>`;
                    }

                     pages += ` <li  class="page-item"><a class="page-link" onclick="GetDataPage(${estate.pages})">${estate.pages}</a></li>`
                } else {
                     for (var x = 1; x < estate.pages+1; x++) {
                        pages += ` <li  class="page-item last"><a class="page-link" onclick="GetDataPage(${x})">${x}</a></li>`;
                    }
                }
                pages += ` <li id="btnNext" class="page-item"><span class="page-link">Next</span>`;
                $("#pagination").html(pages);

                var text = "";
                for (var i = 0; i < estate.data.length; i++) {
                    text += `<div class="col-12 col-md-6 col-lg-3 " data-aos="zoom-in-left">
                <div class="game px-2">
                <div class="rank"><span class="bi bi-star checked"></span></div>
                <div class="front">
                  <img src="${estate.data[i].main_photo}" class="img-fluid" alt="game">
                  <div>
                    <h3 class="text-center py-3">${estate.data[i].name}</h3>
                  </div>
                  <div class="status d-flex justify-content-between align-items-center">
                    <span>${estate.data[i].likes}</span>
                    <span class="bi bi-star checked"></span>
                  </div>
                </div>
                <div class="back">
                  <div class="streaming-info">
                    <div class="game-stat  text-center">
                      <b>  السعر:  ${estate.data[i].price} ${estate.data[i].currency.currency} </b> <br/> <b> ${estate.data[i].city.name} المدينة  </b><br/> <b>الدولة${estate.data[i].state.name}  </b>
                      
                    </div>
                  </div>
                  <div class="d-flex align-items-center">
                    <a href="#" class="rounded-5 p-2 bg-b mx-3">انقر التفاصيل </a>
                    <i class="heart bi bi-heart-fill mx-3"></i>
                  </div>
                </div>
                <div class="backgroundWrapper"></div>
              </div>
            </div>`;
                }
                $("#Estates").html(text);
            }
 });
}
function AddLike(Id,el) {
   
      $.ajax({
            method: 'Get',
            url: `/Estate/AddLikes/${Id}`,

            success: function (count) {
   $(el).children("span").text(count);
            }
 });
}   
 $(function () {
                $("#mm").chosen();  
                
          })
          window.onload=function (){
              var x = document.getElementById("mm_chosen");
              x.classList.add("w-100");
          }
        
    </script>
    
}